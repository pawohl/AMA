<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<script type="text/javascript">
      window.onerror = function (error, url, line) {
        alert(error + ' on ' +  url + ' (l.' + line + ')');
      }
		</script>
    <script src="jQuery/jquery-1.9.1.js"></script>
    <script src="loader.js"></script>
    <script src="util.js"></script>
    <script src="formulaedit.js"></script>
    <title>Moledit demo</title>
</head>

<body>
    <h1>Some text</h1>
    <div id="molEdit"></div>
    <div><button id="toolchainbutton">Render toolchain</button><br/><textarea style="width:90%;height:100em;" id="output"></textarea></div>
  	<script type="text/javascript">
      function toolchain() {
        setTimeout(function() {
          console.log($ME);
          var $output = $('#output');
          $output.val('');
          $ME.$getMolfile().done(function(response) {
            console.log(response);
            $output.val($output.val() + '\n...' + response);
          });
          $ME.$getSMILES().done(function(response) {
            console.log(response);
            $output.val($output.val() + '\n...' + response);
          });
         $ME.$getSVG().done(function(response) {
            console.log(response);
            $output.val($output.val() + '\n...' + response);
          });
         $ME.$getPNG().done(function(response) {
            console.log(response);
            $output.val($output.val() + '\n...' + response);
          });
        }, 1);
      }
      $('#toolchainbutton').click(toolchain);
			initialMolecule = 
			[
				"",
        "  Ketcher 09181315312D 1   1.00000     0.00000     0",
        "",
        " 23 22  0     0  0            999 V2000",
        "   -1.5500    5.0000    0.0000 O   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -0.8429    5.7071    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -0.5841    5.2588    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "    0.1230    5.4483    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "    0.3819    5.0000    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "    1.0890    5.7071    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -7.0000    5.2750    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -7.5000    4.4090    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -8.0000    3.5429    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -6.5000    4.4090    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -6.0000    3.5429    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -4.1750    3.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -4.1750    4.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -4.1750    5.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -3.4679    4.8429    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -2.7608    5.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -2.7608    4.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -2.7608    3.5500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -0.7000    4.4500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -1.2000    3.5840    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "    0.3000    4.4500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "    0.8000    3.5840    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "   -0.2000    5.3160    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0",
        "  1  2  1  0     0  0",
        "  1  3  1  0     0  0",
        "  2  4  1  0     0  0",
        "  3  5  1  0     0  0",
        "  4  6  1  0     0  0",
        "  5  6  1  0     0  0",
        "  7  8  1  0     0  0",
        "  8  9  1  0     0  0",
        "  8 10  1  0     0  0",
        "  7 10  1  0     0  0",
        " 10 11  1  0     0  0",
        " 12 13  1  0     0  0",
        " 13 14  1  0     0  0",
        " 14 15  1  0     0  0",
        " 15 16  1  0     0  0",
        " 16 17  1  0     0  0",
        " 17 18  1  0     0  0",
        " 23 19  1  0     0  0",
        " 19 20  1  0     0  0",
        " 19 21  1  0     0  0",
        " 23 21  1  0     0  0",
        " 21 22  1  0     0  0",
        "M  END"
			].join("\n");
      window.$ME = molEdit.$create(530, 800, initialMolecule);
      $ME.appendTo('#molEdit');
      toolchain();
		</script>
</body>
</html>